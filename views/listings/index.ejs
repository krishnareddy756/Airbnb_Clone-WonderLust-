<% layout("/layouts/boilerplate") %>

<body>
    <!-- <h3>All Listings</h3> -->
    <!-- <form method="get" action="/listings/new">
        <button type="submit">Create New Listing</button>
    </form> -->
    <!-- Filter Bar -->
    <div class="filter-bar-container">
        <div class="filter-bar" id="filterBar">
            <div class="filter-scroll-container">
                <button class="filter-btn active" data-filter="all">
                    <i class="fa-solid fa-fire" aria-hidden="true"></i>
                    <span>Trending</span>
                </button>
                <button class="filter-btn" data-filter="rooms">
                    <i class="fa-solid fa-bed" aria-hidden="true"></i>
                    <span>Rooms</span>
                </button>
                <button class="filter-btn" data-filter="cities">
                    <i class="fa-solid fa-mountain-city" aria-hidden="true"></i>
                    <span>Iconic Cities</span>
                </button>
                <button class="filter-btn" data-filter="mountains">
                    <i class="fa-solid fa-mountain-sun" aria-hidden="true"></i>
                    <span>Mountains</span>
                </button>
                <button class="filter-btn" data-filter="pools">
                    <i class="fa-solid fa-person-swimming" aria-hidden="true"></i>
                    <span>Pools</span>
                </button>
                <button class="filter-btn" data-filter="castles">
                    <i class="fa-solid fa-chess-rook" aria-hidden="true"></i>
                    <span>Castles</span>
                </button>
                <button class="filter-btn" data-filter="beaches">
                    <i class="fa-solid fa-umbrella-beach" aria-hidden="true"></i>
                    <span>Beaches</span>
                </button>
                <button class="filter-btn" data-filter="homes">
                    <i class="fa-solid fa-house" aria-hidden="true"></i>
                    <span>Homes</span>
                </button>
                <button class="filter-btn" data-filter="nature">
                    <i class="fa-solid fa-tree" aria-hidden="true"></i>
                    <span>Nature</span>
                </button>
                <button class="filter-btn" data-filter="unique">
                    <i class="fa-solid fa-umbrella" aria-hidden="true"></i>
                    <span>Unique Stays</span>
                </button>
            </div>
            
            <!-- Tax Toggle -->
            <div class="tax-toggle-container">
                <div class="tax-toggle">
                    <input type="checkbox" id="taxToggle" class="tax-checkbox">
                    <label for="taxToggle" class="tax-label">
                        <span class="tax-text">Display total before taxes</span>
                        <div class="tax-switch">
                            <div class="tax-slider"></div>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Property Grid -->
    <div class="property-grid">
        <% for(let listing of allListings) { %> 
            <div class="property-card" data-listing-id="<%= listing._id %>">
                <a href="/listings/<%= listing._id %>" class="property-link">
                    <!-- Image Section -->
                    <div class="property-image-container">
                        <div class="property-image-carousel">
                            <img src="<%= listing.image.url %>" 
                                 class="property-image"
                                 alt="<%= listing.title %>"
                                 loading="lazy"
                            />
                            <!-- Image indicators (for future carousel) -->
                            <div class="image-indicators">
                                <div class="indicator active"></div>
                            </div>
                        </div>
                        
                        <!-- Favorite heart icon -->
                        <button class="favorite-btn" aria-label="Add to favorites">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>

                    <!-- Property Info Section -->
                    <div class="property-info">
                        <!-- Location and Rating -->
                        <div class="property-header">
                            <div class="property-location">
                                <%= listing.location %>
                            </div>
                            <div class="property-rating">
                                <i class="fa-solid fa-star"></i>
                                <span class="rating-value">4.8</span>
                            </div>
                        </div>

                        <!-- Title -->
                        <div class="property-title">
                            <%= listing.title %>
                        </div>

                        <!-- Property type/description -->
                        <div class="property-type">
                            <%= listing.description.length > 50 ? listing.description.substring(0, 50) + '...' : listing.description %>
                        </div>

                        <!-- Dates (placeholder for now) -->
                        <div class="property-dates">
                            Available now
                        </div>

                        <!-- Price -->
                        <div class="property-price">
                            <span class="price-amount">â‚¹<%= listing.price.toLocaleString("en-IN") %></span>
                            <span class="price-period">night</span>
                            <div class="tax-info">+18% GST</div>
                        </div>
                    </div>
                </a>
            </div>
        <% } %>
    </div>

    <br>
    <script>
      let taxSwitch = document.getElementById('taxToggle');

taxSwitch.addEventListener('click', () => {
  let taxInfo = document.getElementsByClassName('tax-info');
  for (let info of taxInfo) {
    info.style.display = taxSwitch.checked ? 'block' : 'none';
  }
});


    </script>
</body>

