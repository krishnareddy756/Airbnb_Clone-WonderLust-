<nav class="navbar navbar-expand-lg sticky-top" role="navigation">
  <div class="container-fluid navbar-container">
    
    <!-- Logo Section -->
    <div class="navbar-brand-section">
      <a class="navbar-brand" href="/listings" aria-label="WanderLust Home">
        <i class="fa-solid fa-compass" aria-hidden="true"></i>
        <span class="brand-text">wanderlust</span>
      </a>
    </div>

    <!-- Search Bar Section (Desktop) -->
    <div class="navbar-search-section d-none d-lg-flex justify-content-center">
      <form action="/listings" method="GET" class="w-100" style="max-width:980px;">
        <div class="search-pill d-flex align-items-center p-2 shadow-sm rounded-pill bg-white">
          <div class="px-3 flex-fill">
            <label class="form-label small text-muted mb-1 d-none">Where</label>
            <div class="input-group">
              <span class="input-group-text bg-transparent border-0"><i class="fa-solid fa-location-dot"></i></span>
              <input type="text" name="location" class="form-control border-0" placeholder="Anywhere" aria-label="Search destinations" autocomplete="off">
            </div>
          </div>

          <div class="px-3 d-none d-xl-block">
            <label class="form-label small text-muted mb-1 d-none">Dates</label>
            <input type="text" name="dates" class="form-control border-0" placeholder="Add dates" readonly>
          </div>

          <div class="px-3 d-none d-xl-block">
            <label class="form-label small text-muted mb-1 d-none">Guests</label>
            <input type="number" name="guests" class="form-control border-0" placeholder="Add guests" min="1">
          </div>

          <div class="px-3">
            <button class="btn btn-danger rounded-pill px-4" type="submit" aria-label="Search">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Mobile Search Button -->
    <div class="mobile-search d-lg-none">
      <button class="mobile-search-btn" type="button" aria-label="Search">
        <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
        <span>Where to?</span>
      </button>
    </div>

    <!-- User Menu Section -->
    <div class="navbar-user-section">
      <div class="user-menu-container">
        <% if (!currentUser) { %>
          <a href="/listings/new" class="become-host-link">Become a Host</a>
        <% } %>
        
        <div class="user-menu-dropdown">
          <button 
            class="user-menu-button" 
            type="button" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
            aria-label="User menu"
          >
            <i class="fa-solid fa-bars" aria-hidden="true"></i>
            <div class="user-avatar">
              <% if (currentUser) { %>
                <i class="fa-solid fa-user" aria-hidden="true"></i>
              <% } else { %>
                <i class="fa-solid fa-user-circle" aria-hidden="true"></i>
              <% } %>
            </div>
          </button>
          
          <ul class="dropdown-menu dropdown-menu-end user-dropdown">
            <% if (!currentUser) { %>
              <li><a class="dropdown-item" href="/signup">Sign up</a></li>
              <li><a class="dropdown-item" href="/login">Log in</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/listings/new">Airbnb your home</a></li>
            <% } else { %>
              <li><a class="dropdown-item" href="/bookings/my-bookings">My trips</a></li>
              <li><a class="dropdown-item" href="/wishlists">Wishlists</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/listings/new">Airbnb your home</a></li>
              <li><a class="dropdown-item" href="/listings">Host an experience</a></li>
              <li><a class="dropdown-item" href="/listings">Account</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/logout">Log out</a></li>
            <% } %>
          </ul>
        </div>
      </div>
    </div>

  </div>
</nav>
